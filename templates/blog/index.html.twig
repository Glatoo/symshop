{# templates/blog/layout.html.twig #}
{% extends 'base.html.twig' %}

{% block body %}
    <article class="article-blog">
        <h1>Blogs</h1>
        {% if is_granted('ROLE_USER') %}
            <a class="create-blog" href="{{ path('blog_create') }}">Create Post</a>
            <a class="create-blog-phone" href="{{ path('blog_create') }}"><img src="{{ asset("images/add.png") }}"></a>
        {% endif %}
        <form action="{{ path("blog") }}"
              method="post" id="form">
            <div class="blog-search">
                <input class="blog-search-input" type="text" placeholder="Search Here" name="search_phrase" autocomplete="off" value="{{ phrase }}"><br>
                <input type="submit" style="visibility: hidden">
            </div>
            {% for blog in blogs %}
                <div class="blog-container">
                    <p class="blog-user">u/{{ blog.user.username }}</p>
                    <h2 class="blog-title">{{blog.title}}</h2>
                    <p class="blog-text">{{ blog.text }}</p>
                    <p class="blog-date">Created On: {{ blog.getCreatedAt()|date("d/m/Y") }}</p>
                </div>

            {% endfor %}
            <div class="paging">

                {% if page > 1 %}
                    <input type="submit"  name="next_page" value="{{ page-1 }}">
                {% endif %}
                <p>{{ page }}</p>
                {% if blogs|length > 19 %}
                    <input type="submit"  name="next_page" value="{{ page+1 }}">
                {% endif %}

            </div>
        </form>

    </article>
{% endblock %}