{% extends('base.html.twig') %}
{% block body %}
    <article style="background-color: #E2E2E2;">
        <form action="{{ path("products") }}"
              method="post" id="form">
            <section>
                <h1 class="products-header">PRODUCTS</h1>
                <div class="filters">
                    <span class="filter-opener" id="brand" onclick="openFilter('brand');">Brand</span>
                    <span class="filter-opener" id="size" onclick="openFilter('size');">Size</span>
                    <span class="filter-opener" id="type" onclick="openFilter('type');">Type</span>
                    <span class="filter-opener" id="price" onclick="openFilter('price');">Price</span>
                </div>
                <div class='filter-items' id='brand_sub'>
                    {% for brand in brands %}
                        <div class='filter-items-border'>
                            <label for='{{ brand.brand }}'>{{ brand.brand }}</label>
                            {% if brand.brand in old_brand %}
                                <input value='{{ brand.brand }}' id='{{ brand.brand }}' type='checkbox' name='brand[]'
                                       checked>
                            {% else %}
                                <input value='{{ brand.brand }}' id='{{ brand.brand }}' type='checkbox' name='brand[]'>
                            {% endif %}
                        </div>
                    {% endfor %}
                    <input type="submit" value="Search" name="search" class="search">
                </div>
                <div class='filter-items' id='size_sub'>
                    {% for size in sizes %}
                        <div class='filter-items-border'>
                            <label for='{{ size.size }}'>{{ size.size }}</label>
                            {% if size.size in old_size %}
                                <input value='{{ size.size }}' id='{{ size.size }}' type='checkbox' name='size[]'
                                       checked>
                            {% else %}
                                <input value='{{ size.size }}' id='{{ size.size }}' type='checkbox' name='size[]'>
                            {% endif %}
                        </div>
                    {% endfor %}
                    <input type="submit" value="Search" name="search" class="search">
                </div>
                <div class='filter-items' id='type_sub'>
                    {% for type in types %}
                        <div class='filter-items-border'>
                            <label for='{{ type.type }}'>{{ type.type }}</label>
                            {% if type.type in old_type %}
                                <input value='{{ type.type }}' id='{{ type.type }}' type='checkbox' name='type[]'
                                       checked>
                            {% else %}
                                <input value='{{ type.type }}' id='{{ type.type }}' type='checkbox' name='type[]'>
                            {% endif %}
                        </div>
                    {% endfor %}
                    <input type="submit" value="Search" name="search" class="search">
                </div>

                <div class="filter-items" id="price_sub">
                    <label for="min_price" style="margin-left: 10px;">Minimal price: </label>

                    {% if old_price[0] is null %}
                        <input type="number" name="min_price" id="min_price" style="margin-right: 10px;">
                    {% else %}
                        <input type="number" name="min_price" id="min_price" style="margin-right: 10px;"
                               value="{{ old_price[0] }}">
                    {% endif %}
                    <label for="max_price">Maximum price: </label>
                    {% if old_price[1] is null %}
                        <input type="number" name="max_price" id="max_price" style="margin-right: 10px;">
                    {% else %}
                        <input type="number" name="max_price" id="max_price" style="margin-right: 10px;"
                               value="{{ old_price[1] }}">
                    {% endif %}

                    <input type="submit" value="Search" name="search" class="search">
                </div>
                <label for="sort_by">Sort by:</label>
                <select name="sort_by" id="sort_by" onchange="document.getElementById('form').submit();">
                    {% if old_sort == "name" %}
                        <option value="name" selected>Name</option>
                    {% else %}
                        <option value="name" selected>Name</option>
                    {% endif %}

                    {% if old_sort == "price" %}
                        <option value="price" selected>Price</option>
                    {% else %}
                        <option value="price">Price</option>
                    {% endif %}

                    {% if old_sort == "type" %}
                        <option value="type" selected>Type</option>
                    {% else %}
                        <option value="type">Type</option>
                    {% endif %}

                    {% if old_sort == "brand" %}
                        <option value="brand" selected>Brand</option>
                    {% else %}
                        <option value="brand">Brand</option>
                    {% endif %}

                    {% if old_sort == "size" %}
                        <option value="size" selected>Size</option>
                    {% else %}
                        <option value="size">Size</option>
                    {% endif %}
                </select>
                <div class='product-list'>
                    {% for product in products %}
                        <div class='product-container'>
                            <div style="height: 240px; box-shadow: 0 2px 4px rgba(0, 0, 0, 0.46); background-color: white; border-radius: 25px;">
                                <a href="{{ path('products_detail', {product: product.getId()}) }}">
                                    <img class='product-img'
                                         src={{ asset("images/#{product.img}.jpg") }} alt="{{ product.img }}" alt="img">
                                </a>
                            </div>
                            <div class="product-info">
                                <h1 class='product-header'
                                    style="background-image: {{ asset('images/products-background.jpg') }}; float: left;">{{ product.brand }} {{ product.name }}</h1>
                                <p class='product-description'
                                   style="float:left; text-align: left; width: 100%;">{{ product.description }}</p>
                                <p class='product-price' style="float: right; margin-top: -12%;">
                                    ${{ product.price }}</p><br>
                            </div>
                        </div>
                    {% endfor %}
                </div>
                <div class="paging">


                    {% if page > 1 %}
                        <input type="submit" name="page" value="{{ page-1 }}">
                    {% endif %}
                    <p>{{ page }}</p>
                    {% if products|length > 19 %}
                        <input type="submit" name="page" value="{{ page+1 }}">
                    {% endif %}

                </div>
            </section>
        </form>
    </article>
{% endblock %}